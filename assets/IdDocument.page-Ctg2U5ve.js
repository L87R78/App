import{aD as y,j as e,p as Y,H as C,r as v,X as S,F as x,af as D,x as T,aE as E,ae as L,aF as G,aG as P}from"./index-C2duiuuj.js";import{a as b,d as W,u as z}from"./hooks-R2O77Bhx.js";import{C as F}from"./Checkbox-DvS7z8z_.js";import{a as N,L as O,b as k}from"./LoadingModal-DL-4ojPb.js";import{A as H}from"./Alert-D6PT42Lj.js";import{C as B}from"./DatePicker-DoTK8hJe.js";import{S as h}from"./Select-CWEqqVCG.js";import{T as u}from"./TextField-Bqc5W6jP.js";import"./Popper-CgBA7VTr.js";import"./TextField-B6Gwadev.js";const R=[{label:"ID Card Specimen 2010",value:"ID Card Specimen 2010"},{label:"Passport",value:"passport"},{label:"Driver License",value:"driver_license"}],V=[{label:"Sofia",value:"Sofia"},{label:"Plovdiv",value:"Plovdiv"},{label:"Varna",value:"Varna"},{label:"Burgas",value:"Burgas"}],U=[{label:"Borovo",value:"Borovo"},{label:"Lyulin 1",value:"Lyulin 1"},{label:"Lyulin 2",value:"Lyulin 2"},{label:"Lyulin 3",value:"Lyulin 3"},{label:"Lyulin 4",value:"Lyulin 4"}],$=[{label:"Bulgaria",value:"Bulgaria"},{label:"Germany",value:"Germany"},{label:"USA",value:"USA"},{label:"France",value:"France"},{label:"Italy",value:"Italy"},{label:"Spain",value:"Spain"}],X=[{label:"Male",value:"M"},{label:"Female",value:"F"}],q=[{label:"Bulgaria",value:"Bulgaria"},{label:"Germany",value:"Germany"},{label:"USA",value:"USA"},{label:"France",value:"France"},{label:"Italy",value:"Italy"},{label:"Spain",value:"Spain"}],J=[{label:"Bulgarian",value:"Bulgarian"},{label:"German",value:"German"},{label:"American",value:"American"},{label:"French",value:"French"},{label:"Italian",value:"Italian"},{label:"Spanish",value:"Spanish"}],K=({isDbScan:s,currentData:c,onChange:a})=>{const{t:r}=N(["shared/label"]);return e.jsxs("section",{className:"container mx-auto mb-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(h,{label:r("shared/label:inhabitedPlace"),disabled:s,options:V,value:c.city||"",onChange:i=>a("city",i.target.value)}),e.jsx(h,{label:r("shared/label:neighbourhood"),disabled:s,options:U,value:c.neighbourhood||"",onChange:i=>a("neighbourhood",i.target.value)})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx(u,{label:r("shared/label:street"),disabled:s,value:c.street||"",onChange:i=>a("street",i.target.value)})}),e.jsxs("div",{className:" grid w-full grid-cols-2 gap-4 md:grid-cols-4",children:[e.jsx(u,{label:r("shared/label:number"),disabled:s,value:c.streetNumber||"",onChange:i=>a("streetNumber",i.target.value)}),e.jsx(u,{label:r("shared/label:floor"),disabled:s,value:c.floor||"",onChange:i=>a("floor",i.target.value)}),e.jsx(u,{label:r("shared/label:aptNumber"),disabled:s,value:c.apartment||"",onChange:i=>a("apartment",i.target.value)}),e.jsx(u,{label:r("shared/label:postalCode"),disabled:s,value:c.postalCode||"",onChange:i=>a("postalCode",i.target.value)})]})]})},w=y.memo(K),n={pageWrapper:"flex flex-col gap-5",topSection:"flex gap-5",gridLayout:"grid grid-cols-2",validationSection:"m-3 grid w-full grid-cols-1 gap-4",bottomControls:"flex flex-col justify-between p-3",cardFooter:"flex justify-between",modalContent:"flex flex-col items-center justify-center gap-4 p-4",currentScanWrapper:"flex flex-col gap-4 w-full h-auto overflow-y-auto",gridContainer:"grid md:grid-cols-1 lg:grid lg:grid-cols-2 gap-4",flexContainer:"flex flex-col gap-4",createInfContainer:"flex flex-col items-center justify-center h-full w-full p-8",dbDataWarning:"flex gap-2 p-8 text-secondary bg-accent-light rounded-base",validationHeader:"flex justify-between items-center bg-(--clr-bg-2) p-3 text-base font-semibold rounded-xl",validationBody:"bg-bg-1 p-3 text-sm",validationBodyList:"list-none m-0 p-0",validationItem:"flex justify-between items-center py-2",validationText:"m-0 font-medium",customerDataSavedText:"text-primary text-base font-normal",assignedCustomerValue:"text-text text-base font-bold ml-1",wrapperCustomerDataSavedTexts:"flex justify-center"},Q=({isDbScan:s=!1,setGoToContactModalVisible:c})=>{const{t:a}=N(["pages/client/client_data/id_document","shared/common","shared/label","shared/button"]),r=Y(),i=C(l=>l.onboarding.idDocument.isDbScanAvailable),[g,p]=v.useState(!0),j=C(l=>s?l.onboarding.idDocument.dbScan:l.onboarding.idDocument.scanData),f=v.useMemo(()=>j,[j]),[d,o]=v.useState(f),_=()=>{console.log("New scan button clicked")},A=()=>{!s&&c&&(r(T(!0)),r(E(d)),setTimeout(()=>{r(T(!1)),c(!0)},1e3))};return e.jsxs("div",{className:n.currentScanWrapper,children:[e.jsxs("section",{className:"flex flex-col gap-5",children:[e.jsx(S,{variant:"h6",children:a(s?"pages/client/client_data/id_document:dbData":"pages/client/client_data/id_document:scanData")}),e.jsxs("div",{className:`flex flex-col gap-6 pb-8 ${i?"":"lg:grid lg:grid-cols-2 lg:gap-4"}`,children:[e.jsx(b,{children:e.jsx(W,{})}),!s&&!i&&e.jsx(b,{children:e.jsxs("div",{className:n.createInfContainer,children:[e.jsx(H,{severity:"warning",className:n.dbDataWarning,children:a("pages/client/client_data/id_document:noClientData")}),e.jsx(S,{variant:"h6",className:"text-center",children:a("pages/client/client_data/id_document:doYouWantToCreateClient")}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(x,{variant:"outlined",children:a("shared/common:no")}),e.jsx(x,{onClick:A,children:a("shared/common:yes")})]})]})})]}),e.jsx("main",{children:e.jsxs(b,{children:[e.jsxs("div",{className:i?n.flexContainer:n.gridContainer,children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(h,{id:"document-type",label:a("shared/label:documentType"),disabled:!0,options:R,value:d.documentType,onChange:l=>o(t=>({...t,documentType:l.target.value}))}),e.jsxs("div",{className:n.gridContainer,children:[e.jsx(u,{label:a("shared/label:documentNumber"),value:d.documentNumber,disabled:s,onChange:l=>o(t=>({...t,documentNumber:l.target.value}))}),e.jsx(u,{label:a("shared/label:authority"),value:d.authority,disabled:s,onChange:l=>o(t=>({...t,authority:l.target.value}))})]}),e.jsxs("div",{className:n.gridContainer,children:[e.jsx(B,{label:a("shared/label:dateOfIssue"),value:d.dateOfIssue,disablePast:!1,onChange:l=>o(t=>({...t,dateOfIssue:l?D(l).format("DD/MM/YYYY"):""}))}),e.jsx(B,{label:a("shared/label:dateOfExpiry"),value:d.dateOfExpiry,onChange:l=>o(t=>({...t,dateOfExpiry:l?D(l).format("DD/MM/YYYY"):""}))})]}),e.jsxs("div",{className:n.gridContainer,children:[e.jsx(B,{label:a("shared/label:dateOfBirth"),disablePast:!1,value:d.dateOfBirth,onChange:l=>o(t=>({...t,dateOfBirth:l?D(l).format("DD/MM/YYYY"):""}))}),e.jsx(h,{label:a("shared/label:placeOfBirth"),disabled:s,options:V,value:d.placeOfBirth||"",onChange:l=>{o(t=>({...t,placeOfBirth:l.target.value})),console.log(d)}})]}),e.jsx(w,{isDbScan:s,currentData:d.permanentAddress,onChange:(l,t)=>o(m=>({...m,permanentAddress:{...m.permanentAddress,[l]:t}}))}),!s&&e.jsx("div",{className:"mb-4",children:e.jsx(F,{label:a("shared/common:permanentAddressMatches"),checked:g,onChange:l=>p(l.target.checked)})}),!g&&!s&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:a("pages/client/client_data/id_document:communicationAddress")}),e.jsx(w,{isDbScan:s,currentData:d.communicationAddress,onChange:(l,t)=>o(m=>({...m,permanentAddress:{...m.permanentAddress,[l]:t}}))})]})]}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:n.gridContainer,children:[e.jsx(u,{label:a("shared/label:namesInCyrillic"),value:d.nameCyrilic,disabled:s,onChange:l=>o(t=>({...t,nameCyrilic:l.target.value}))}),e.jsx(u,{label:a("shared/label:namesInLatin"),value:d.nameLatin,disabled:s,onChange:l=>o(t=>({...t,nameLatin:l.target.value}))}),e.jsx(u,{label:a("shared/label:ucn"),value:d.ucn,disabled:!0}),e.jsx(h,{label:a("shared/label:countryOfIssue"),disabled:s,options:$,value:d.countryOfIssue||"",onChange:l=>{o(t=>({...t,countryOfIssue:l.target.value}))}}),e.jsx(h,{label:a("shared/label:citizenship"),disabled:s,options:J,value:d.citizenship||"",onChange:l=>{o(t=>({...t,citizenship:l.target.value}))}}),e.jsx(h,{label:a("shared/label:gender"),disabled:s,options:X,value:d.gender||"",onChange:l=>{o(t=>({...t,gender:l.target.value}))}}),e.jsx(u,{label:a("shared/label:postalCode"),value:d.postalCode}),e.jsx(h,{label:a("shared/label:residence"),disabled:s,options:q,value:d.residence||"",onChange:l=>{o(t=>({...t,residence:l.target.value}))}})]})})]}),!s&&e.jsx("footer",{className:"flex justify-end pt-4",children:e.jsx(x,{variant:"outlined",onClick:_,children:a("shared/button:scanAgain")})})]})})]}),e.jsx(O,{})]})},I=y.memo(Q),Z=({validationHeader:s,validationBody:c,hasButtonCheckAgain:a=!1,onCheckAgain:r})=>{const{t:i}=N(["pages/client/client_data/id_document","shared/common"]);return e.jsxs(b,{children:[e.jsxs("header",{className:n.validationHeader,children:[e.jsx("h3",{children:s}),e.jsx("h3",{children:i("shared/common:result")})]}),e.jsx("main",{className:n.validationBody,children:e.jsx("ul",{className:n.validationBodyList,children:c.map((g,p)=>e.jsx("li",{className:n.validationItem,children:e.jsx("p",{className:n.validationText,children:g})},p))})}),a&&e.jsx("footer",{className:"flex justify-end p-2",children:e.jsx(x,{variant:"outlined",onClick:r,children:i("pages/client/client_data/id_document:checkAgain")})})]})},M=y.memo(Z),ee=({handleChangeTab:s})=>{const c=z(),{t:a}=N(["pages/client/client_data/id_document","shared/common"]),{isDbScanAvailable:r,scanData:i,clientNumber:g}=C(m=>m.onboarding.idDocument),p=C(m=>m.onboarding.status),[j,f]=v.useState(!1),[d,o]=v.useState(!1),_=p===L.PENDING||p===L.IDLE,A=()=>{f(!0),setTimeout(()=>f(!1),1e3)},l=()=>{o(!1),s(1),c(P())};v.useEffect(()=>{i.ucn||c(G())},[i.ucn,c]);const t=()=>e.jsxs(e.Fragment,{children:[e.jsx(M,{validationHeader:a("pages/client/client_data/id_document:validationScannedDocument"),validationBody:[a("pages/client/client_data/id_document:mrzOcr"),a("pages/client/client_data/id_document:uvElements")]}),e.jsx(M,{validationHeader:a("pages/client/client_data/id_document:validationMVRCheck"),validationBody:[a("pages/client/client_data/id_document:validationMVRValid")],hasButtonCheckAgain:!0,onCheckAgain:A})]});return _?e.jsx(O,{}):e.jsxs("div",{className:n.pageWrapper,children:[e.jsx("div",{className:n.topSection,children:e.jsx("div",{className:r?n.gridContainer:n.flexContainer,children:r?e.jsxs(e.Fragment,{children:[e.jsx(I,{setGoToContactModalVisible:o},"primary"),e.jsx(I,{isDbScan:!0},"db")]}):e.jsx(I,{setGoToContactModalVisible:o},"primary")})}),r?e.jsxs("div",{className:n.gridLayout,children:[e.jsxs("div",{className:n.validationSection,children:[t(),e.jsx(b,{children:e.jsxs("div",{className:n.cardFooter,children:[e.jsx(F,{label:a("pages/client/client_data/id_document:newClient")}),e.jsx(x,{children:a("pages/client/client_data/id_document:createNewClient")})]})})]}),e.jsxs("div",{className:n.bottomControls,children:[e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(x,{children:a("shared/common:next")})})]})]}):e.jsx("div",{className:n.gridContainer,children:t()}),e.jsx(k,{open:d,children:e.jsxs("div",{className:n.modalContent,children:[e.jsxs("div",{className:"text-primary m-2 text-center",children:[e.jsx("p",{className:n.customerDataSavedText,children:a("pages/client/client_data/id_document:customerDataSavedFirstText")}),e.jsxs("div",{className:n.wrapperCustomerDataSavedTexts,children:[e.jsx("p",{className:n.customerDataSavedText,children:a("pages/client/client_data/id_document:customerDataSavedThirdText")}),e.jsx("p",{className:n.assignedCustomerValue,children:g})]})]}),e.jsx("section",{className:"flex flex-row gap-6",children:e.jsx(x,{onClick:l,children:a("pages/client/client_data/id_document:continueToContactDetails")})})]})}),e.jsx(k,{open:j,children:e.jsx("h3",{children:a("pages/client/client_data/id_document:checkingAgain")})})]})},ue=y.memo(ee);export{ue as default};
